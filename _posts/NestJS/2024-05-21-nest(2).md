---
title: ğŸ¦ NestJS | Get API
date: 2024-05-21 00:00:00 +0800
toc: true
pin: false
published: true
categories: [SERVER, NEST.JS]
tags: [nest.js]
image: https://github.com/Jng-su/Jng-su/assets/168960634/2759d67c-aca7-4c2c-adac-b0fee5a4d7ff
---

<br>

---

<br>


> ## Create BBS module

<br>

```shell
nest g module boards
```

| Command  | Description                     |
| -------- | ------------------------------- |
| `nest`   | using nest's cli                |
| `g`      | generate                        |
| `module` | schematic that I want to create |
| `boards` | name of the schematic           |



![image](https://github.com/Jng-su/Jng-su/assets/168960634/8847b76f-0a35-47d0-b002-1284842d203b){: .normal}

<br>

> ## Controller

ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  í´ë¼ì´ì–¸íŠ¸ì— ì‘ë‹µì„ ë°˜í™˜í•¨.

<br>

```typescript
@Controller("/boards")  // Decorater
export class BoardsController{
    @Get()              // Handler
    getBoards(): string {
        return 'Return all boards';
    }
    @Get('/:id')
    @Post()
    @Patch()
    ...
}
```

- `Decorater` : Controllerì— ì˜í•´ì„œ ì²˜ë¦¬ë˜ëŠ” "ê²½ë¡œ(Path)" ì •ì˜
- `Handler` : @Get @Post @Delete ë“±ê³¼ ê°™ì€ Http Method ì •ì˜

<br>

```shell
nest g controller boards --no-spec
```

| Command      | Description                     |
| ------------ | ------------------------------- |
| `nest`       | using nest's cli                |
| `g`          | generate                        |
| `controller` | schematic that I want to create |
| `boards`     | name of the schematic           |
| `--no-spec`  | Don't create test code          |

<br>

![image](https://github.com/Jng-su/Jng-su/assets/168960634/076d785e-635a-449c-af66-04248f894230){: width=100% height=100% .normal}

ìƒì„±í•œ controllerë¥¼ ìë™ìœ¼ë¡œ importì™€ì„œ moduleì— ë“±ë¡ì‹œì¼œì¤Œ ğŸ‘

<br>

> ## Providers, Service

### Provider

Nestì˜ ê¸°ë³¸ ê°œë…ì´ê³  Service, Repository, Factory, Helper ë“±ì— í•´ë‹¹í•¨. 
ì¦‰, ê°ì²´ë“¤ì€ ì„œë¡œ ë‹¤ì–‘í•œ ê´€ê³„ë¥¼ ë§Œë“¤ê³  ê·¸ ê´€ê³„ë“¤ì˜ ì¢…ì†ì„±ì„ ì£¼ì…í•  ìˆ˜ ìˆìŒ.

<br>



<br>

### Service

`@Injectable` Decoratorë¡œ ê°ì‹¸ì ¸ì„œ ëª¨ë“ˆì— ì œê³µë¨. ì´ ServiceëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆìŒ. 

```typescript
@Injectable()
export class AppService {
    getHello(): string {
        return "Hello world";
    }
}
```

<br>

Service ì•ˆì—ì„œëŠ” ì£¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•¨. 

```shell
nest g service boards --no-spec
```

![image](https://github.com/Jng-su/Jng-su/assets/168960634/0b8a974f-06e0-430e-98e6-d9c9de5f49b0){: width=100% height=100% .normal}

ì•ì„œ ì„¤ëª…í•œ Providersë„ ìë™ ë“±ë¡í•´ì¤Œ ğŸ‘

#### ğŸ“Ÿ `boards.controller.ts`

ìš°ì„  Serviceë¥¼ ì‘ì„±í•˜ê¸° ì „ì— BoardServiceë¥¼ BoardControllerì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•˜ê¸° ìœ„í•´ "Dependency Injection"ì„ í•´ì¤˜ì•¼í•¨.


```typescript
import { Controller } from '@nestjs/common';
import { BoardsService } from './boards.service';

@Controller('boards')
export class BoardsController {
  constructor(private boardsService: BoardsService) {}

  getAllboards() {
    return this.boardsService.getAllBoards();
  }
}
```

ì ‘ê·¼ ì œí•œì(public, protected, private)ë¥¼ ìƒì„±ì(constructor) íŒŒë¼ë¯¸í„°ì— ì„ ì–¸í•˜ë©´ ì ‘ê·¼ ì œí•œìê°€ ì‚¬ìš©ëœ ìƒì„±ì íŒŒë¼ë¯¸í„°ëŠ” ì•”ë¬µì ìœ¼ë¡œ í´ë˜ìŠ¤ í”„ë¡œí¼í‹°ë¡œ ì„ ì–¸ë¨.


#### ğŸ“Ÿ `boards.service.ts`

ì•„ì§ Databaseì— ì—°ê²°í•˜ì§€ ì•Šì•˜ê¸°ì— dummy dataë¥¼ ì‚¬ìš©í•¨.

```typescript
import { Injectable } from '@nestjs/common';

@Injectable()
export class BoardsService {
  private boards = [];

  getAllBoards() {
    return this.boards;
  }
}
```

- privateë¡œ boardsë¥¼ ì •ì˜í•´ì•¼ë§Œ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìˆ˜ì •ë  ìˆ˜ ìˆìŒ

<br>

ì •ë¦¬í•˜ìë©´, í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìš”ì²­ì„ ë³´ë‚´ë©´ Controllerì— ì•Œë§ì€ ìš”ì²­ ê²½ë¡œì— ë¼ìš°íŒ…í•´ì„œ í•´ë‹¹ë˜ëŠ” Handlerë¡œ ë³´ë‚´ê³  Serviceë¡œ ì´ë™í•œ í›„ ë¡œì§ì„ ì²˜ë¦¬í•˜ê³  Controllerì— ë³´ë‚´ì£¼ê³  í´ë¼ì´ì–¸íŠ¸ë¡œ ì´ë™í•˜ê²Œ ëœë‹¤.

<br>

> ## Create Models

<br>

ëª¨ë¸ì„ ì •ì˜í•˜ê¸° ìœ„í•´ì„œ `Class`ë¥¼ ì´ìš©í•˜ê±°ë‚˜ `Interface`ë¥¼ ì´ìš©í•˜ë©´ ë¨

- `Class` : ë³€ìˆ˜ì˜ íƒ€ì…ê³¼ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„± ê°€ëŠ¥
- `Interface` : ë³€ìˆ˜ì˜ íƒ€ì…ë§Œ ì²´í¬ ê°€ëŠ¥

<br>

#### ğŸ“Ÿ `boards.model.ts`

ìš°ì„  `interface` ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„

```typescript
export interface Board {
  id: string;
  title: string;
  description: string;
  status: BoardStatus;      // ê³µê°œê¸€ or ë¹„ê³µê°œê¸€
}

export enum BoardStatus {
  PUBLIC = 'PUBLIC',
  PRIVATE = 'PRIVATE',
}
```

<br>

#### ğŸ“Ÿ `boards.service.ts`

êµ¬í˜„í•œ Modelì„ serviceì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ import í•´ì™€ì„œ ì‚¬ìš©

- ëª¨ë“  ê²Œì‹œê¸€ ê°€ì ¸ì˜¤ê¸°

```typescript
import { Injectable } from '@nestjs/common';
import { Board } from './boards.models';

@Injectable()
export class BoardsService {
  private boards: Board[] = [];

  getAllBoards(): Board[] {     // ì´ê³³ì— ì‚¬ìš©ëœ typeì€ returnë˜ëŠ” type!!
    return this.boards;
  }
}
```

- íŠ¹ì • ê²Œì‹œê¸€ ê°€ì ¸ì˜¤ê¸° (by id)

```typescript
  getBoardById(boardId: string): Board {
    return this.boards.find((board) => board.id === boardId);
  }
```

<br>

#### ğŸ“Ÿ `boards.controller.ts`

controller handlerì—ì„œ ê²°ê³¼ê°’ì„ returní•´ì£¼ëŠ” ë¶€ë¶„ë„ íƒ€ì… ì§€ì • í•„ìš”

- ëª¨ë“  ê²Œì‹œê¸€ ê°€ì ¸ì˜¤ê¸°

```typescript
  @Get()
  getAllboards(): Board[] {
    return this.boardsService.getAllBoards();
  }
```

- íŠ¹ì • ê²Œì‹œê¸€ ê°€ì ¸ì˜¤ê¸° (by id)

```typescript
  @Get('/:boardId')
  getBoardById(@Param('boardId') boardId: string): Board {
    return this.boardsService.getBoardById(boardId);
  }
```

<br>



êµ³ì´ êµ³ì´ íƒ€ì…ì„ ì§€ì •í•´ì•¼í•˜ëŠ” ì´ìœ ëŠ” ì‚¬ì‹¤ ì„ íƒì‚¬í•­ì´ê³  íƒ€ì…ì„ ì§€ì •í–ˆì„ ê²½ìš°ì˜ ì¥ì ì€ ì§€ì •í•œ íƒ€ì…ê³¼ ë‹¤ë¥¸ ì½”ë“œë¥¼ ì‚¬ìš©í•  ì‹œ **ì—ëŸ¬ë¥¼ ì°¾ì•„ì£¼ê³ ** ì½”ë“œë¥¼ ì½ì„ ë•Œ **ì‰½ê²Œ ì´í•´**í•  ìˆ˜ ìˆê²Œ í•´ì¤Œ. ğŸ˜®