---
title: ğŸ¦ NestJS - Create API
date: 2024-05-22 00:00:00 +0800
toc: true
pin: false
published: true
categories: [SERVER, NEST.JS]
tags: [nest.js]
image: https://github.com/Jng-su/Jng-su/assets/168960634/2759d67c-aca7-4c2c-adac-b0fee5a4d7ff
---

<br>

---

<br>


> ## Create Board

ëª¨ë“  ê²Œì‹œê¸€ì„ ë³¼ ìˆ˜ ìˆëŠ” Get APIëŠ” êµ¬í˜„í–ˆê³  ì´ì œ Post ìš”ì²­ì„ í†µí•´ ì‹¤ì œ ê²Œì‹œíŒì„ ìƒì„±í•  ì˜ˆì • ğŸ›«

#### ğŸ“Ÿ `boards.service.ts`

```typescript
  createBoard(title: string, description: string): {
    const board: Board = {
      title: title,
      description: description,
      status: BoardStatus.PUBLIC,
    }
  }
```

idëŠ” ëª¨ë“  ê²Œì‹œê¸€ì— Unique í•´ì•¼ë˜ëŠ” ë° í˜„ì¬ ë°ì´í„°ë² ì´ìŠ¤ê°€ ì—†ê¸° ë•Œë¬¸ì— ì„ì˜ë¡œ Uniqueí•œ ê°’ì„ ì¤˜ì•¼í•¨.

<br>

ê·¸ë˜ì„œ uuid ëª¨ë“ˆì„ ì‚¬ìš©

```shell
npm install uuid --save
```

```typescript
import { v1 as uuid } from "uuid";

...

  private boards: Board[] = [];

  createBoard(title: string, description: string) {
    const board: Board = {
      id: uuid(),
      title: title,
      description: description,
      status: BoardStatus.PUBLIC,
    };

    this.boards.push(board);
    return board;
  }
```

`createBoard`ì˜ ìš”ì²­ë°›ëŠ” ë°ì´í„° íƒ€ì…ì„ `title`ê³¼ `description`ì„ `string`ìœ¼ë¡œ ì§€ì • (ì•„ì§ DTOë¥¼ êµ¬í˜„ì„ ì•ˆí–ˆê¸°ì—...)

ê²°ê³¼ë¥¼ ê²Œì‹œíŒ ê°ì²´ë“¤ì„ ì €ì¥í•˜ëŠ” ë°°ì—´ì¸ `boards`ì— `push`í•´ì„œ ë„£ìŒ

<br>

#### ğŸ“Ÿ `boards.controller.ts`

- í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë³´ë‚´ì˜¨ ê°’ë“¤ì€ í•¸ë“¤ëŸ¬ì—ì„œ ì–´ë–»ê²Œ ê°€ì ¸ì˜¬ê¹Œ?
    - Node.js
  
    ```javascript
    app.post('/', (req, res) => {
        console.log(req.body)
    })
    ```

    <br>

    - Nest.js
    
    ```typescript
    @Post()
    createBoard(@Body() body) {
        console.log('body: ', body);
    }
    ```

    - Nest.jsì—ì„  ìœ„ì™€ ê°™ì´ `@Body() body`ë¥¼ í†µí•´ reqí•œ ëª¨ë“  ê°’ì„ ê°€ì ¸ì˜´.
    - í•˜ë‚˜ì”© ê°€ì ¸ì˜¤ê³  ì‹¶ìœ¼ë©´ `@Body('title') title` ì´ëŸ°ì‹

    ```typescript
    @Post()
    createBoard(
        @Body('title') title: string,
        @Body('description') description: string,
    ) {
        console.log('title: ', title);
        console.log('description: ', description);
    }
    ```

    - ë‚˜ëŠ” í•˜ë‚˜ì”© requestë¥¼ ì •ì˜í•˜ëŠ”ê²Œ ëª…í™•í•´ì„œ ì¢‹ìŒ ğŸ¸

<br>

```typescript
  @Post('/')
  createBoard(
    @Body('title') title: string,
    @Body('description') description: string,
  ): Board {
    return this.boardsService.createBoard(title, description);
  }
```

![image](https://github.com/user-attachments/assets/2eb377f8-bdd6-40da-8089-4fe9aef07f94)

<br>

> ## DTO

ê³„ì¸µê°„ ë°ì´í„° êµí™˜ì„ ìœ„í•œ ê°ì²´. ì¦‰, ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë°ì´í„°ë¥¼ ì–»ì–´ Serviceë‚˜ Controllerì— ë³´ë‚¼ ë•Œ ì‚¬ìš©í•˜ëŠ” ê°ì²´.

- ë°ì´í„° ìœ íš¨ì„± ì²´í¬ ìš©ì´
- ì•ˆì •ì ì¸ ì½”ë“œ

<br>

- controller

```typescript
@Body('title') title: string,
@Body('description') description: string,

return this.boardsService.createBoard(title, description);
```

- service

```typescript
createBoard(title: string, description: string)
```


Request body ë°›ëŠ” ë¶€ë¶„ì—ì„œ titleê³¼ description ë‘ ê°œë¥¼ ë°›ì•„ì„œ ê´œì°®ì§€ë§Œ Propertyê°€ ë§ì•„ì§€ë©´ methodë§ˆë‹¤ í•œ ë²ˆì”© ë‹¤ ì¨ì¤˜ì•¼í•¨

ê·¸ë˜ì„œ DTOë¥¼ ì •ì˜í•´ì„œ ì‚¬ìš©í•¨. ğŸ‘

<br>

#### ğŸ“Ÿ `create-board.dto.ts`

ìš°ì„  boards í´ë” ì•ˆì— dto í´ë” ìƒì„± í›„ ìœ„ì™€ ê°™ì€ ì´ë¦„ìœ¼ë¡œ íŒŒì¼ì„ ë§Œë“¤ì—ˆìŒ.

<br>

- `class`ì™€ `interface`ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆì§€ë§Œ `class`ëŠ” ëŸ°íƒ€ì„ì—ì„œ ì‘ë™í•˜ê¸° ë•Œë¬¸ì— íŒŒì´í”„ ê°™ì€ ê¸°ëŠ¥ì„ ì´ìš©í•˜ê¸° ìš©ì´í•˜ì—¬ `class`ë¡œ ì‘ì„±í•¨.

```typescript
export class CreateBoardDto {
  title: string;
  description: string;
}
```

<br>

...

<br>

- controller

```typescript
  @Post('/')
  createBoard(@Body() createBoardDto: CreateBoardDto): Board {
    return this.boardsService.createBoard(createBoardDto);
  }
```

<br>

- service

```typescript
  createBoard(createBoardDto: CreateBoardDto) {
    const title = createBoardDto.title;
    const description = createBoardDto.description;
    // í˜¹ì€ const { title, description } = createBoardDto;
    const board: Board = {
      id: uuid(),
      title: title,
      description: description,
      status: BoardStatus.PUBLIC,
    };

    this.boards.push(board);
    return board;
  }
```