---
title: âš¡ FastAPI - User API
date: 2024-06-22 00:00:00 +0800
toc: true
pin: false
published: true
categories: [SERVER, FASTAPI]
tags: [fastapi]
image: https://github.com/Jng-su/Jng-su/assets/168960634/22fbcb9b-a69d-4154-9519-07c66b8a7681
---

<br>

---

> ## Hash


<br>

ë³´ì•ˆìƒ DBì— ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™”ë˜ì§€ ì•Šì€ í‰ë¬¸(Plaintext)ì„ ì €ì¥í•˜ë©´ ì•ˆë¨. ğŸ¤ ê·¸ë˜ì„œ í•„ìš”í•œ ê³¼ì •ì´ í•´ì‹œí™”ëœ ì•”í˜¸ë¬¸(Encrypt)ì„ ì €ì¥í•˜ê³  ë¡œê·¸ì¸ ì‹œ ì´ë¥¼ ë³µí˜¸í™”(Decrypt) í•˜ë©´ë¨

FastAPI ì—ì„œ ì œê³µí•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬

```shell
pip install passlib[bcrypt]
```

ì´ëŠ” bcrypt ì•”í˜¸í™”ë¥¼ ì œê³µí•˜ì—¬ DBì— ì•ˆì „í•˜ê²Œ ì €ì¥í•˜ê²Œí•¨.

<br>

### CryptContext

Passlib ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤ë¡œ ë¹„ë°€ë²ˆí˜¸ í•´ì‹±í•˜ê³  ë¡œê·¸ì¸ì‹œ ì…ë ¥ëœ ë¹„ë°€ë²ˆí˜¸ì™€ DBì— ì €ì¥ëœ ë¹„ë°€ë²ˆí˜¸(hashed_password)ì™€ ë¹„êµ ê²€ì¦í•  ìˆ˜ ìˆìŒ

<br>

`app.Utils.hashing.py`

```python
from passlib.context import CryptContext

pwd_context = CryptContext(schemes=["bcrypt"], deprecated="auto")

def hash_password(password: str) -> str:
    return pwd_context.hash(password)

def verify_password(plain_password: str, hashed_password: str) -> bool:
    return pwd_context.verify(plain_password, hashed_password)
```

<br>

```python
pwd_context = CryptContext(schemes=["bcrypt"], deprecated="auto")
```

- `schemes=["bcrypt"]` : CryptContextê°€ ì‚¬ìš©í•  ì•Œê³ ë¦¬ì¦˜ ì§€ì • (bcrypt)
- `deprecated="auto"` : Passlibê°€ íê¸°ëœ í•´ì‹± ì•Œê³ ë¦¬ì¦˜ì„ ìë™ìœ¼ë¡œ ì²˜ë¦¬. ìµœì‹  ë³´ì•ˆ ê¶Œì¥ ì‚¬í•­ì— ë”°ë¼ í•´ì‹±ì„ ê´€ë¦¬

<br>

> ## Sign In/Up

### Sign In

