---
title: ⚡ FastAPI - User API
date: 2024-06-22 00:00:00 +0800
toc: true
pin: false
published: true
categories: [SERVER, FASTAPI]
tags: [fastapi]
image: https://github.com/Jng-su/Jng-su/assets/168960634/22fbcb9b-a69d-4154-9519-07c66b8a7681
---

<br>

---

> ## Hash


<br>

보안상 DB에 사용자 비밀번호를 암호화되지 않은 평문(Plaintext)을 저장하면 안됨. 🤐 그래서 필요한 과정이 해시화된 암호문(Encrypt)을 저장하고 로그인 시 이를 복호화(Decrypt) 하면됨

FastAPI 에서 제공하는 라이브러리

```shell
pip install passlib[bcrypt]
```

이는 bcrypt 암호화를 제공하여 DB에 안전하게 저장하게함.

<br>

### CryptContext

Passlib 라이브러리에서 제공하는 클래스로 비밀번호 해싱하고 로그인시 입력된 비밀번호와 DB에 저장된 비밀번호(hashed_password)와 비교 검증할 수 있음

<br>

`app.Utils.hashing.py`

```python
from passlib.context import CryptContext

pwd_context = CryptContext(schemes=["bcrypt"], deprecated="auto")

def hash_password(password: str) -> str:
    return pwd_context.hash(password)

def verify_password(plain_password: str, hashed_password: str) -> bool:
    return pwd_context.verify(plain_password, hashed_password)
```

<br>

```python
pwd_context = CryptContext(schemes=["bcrypt"], deprecated="auto")
```

- `schemes=["bcrypt"]` : CryptContext가 사용할 알고리즘 지정 (bcrypt)
- `deprecated="auto"` : Passlib가 폐기된 해싱 알고리즘을 자동으로 처리. 최신 보안 권장 사항에 따라 해싱을 관리

<br>

> ## Sign In/Up

### Sign In

